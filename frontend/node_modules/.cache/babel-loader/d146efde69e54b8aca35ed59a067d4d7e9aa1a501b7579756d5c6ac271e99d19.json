{"ast":null,"code":"import _defineProperty from\"/Users/sutaoliang/live-score/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/Users/sutaoliang/live-score/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useRef}from\"react\";import{DateContext}from\"context/DateContext\";import CalendarTitle from\"./calendarComponents/CalendarTitle\";import CalendarDays from\"./calendarComponents/CalendarDays\";import CalendarDates from\"./calendarComponents/CalendarDates\";import clsx from\"clsx\";import styles from\"./Calendar.module.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Calendar(props){var _useContext=useContext(DateContext),dispatch=_useContext.dispatch;var currDate=new Date();var _useState=useState(currDate.getMonth()),_useState2=_slicedToArray(_useState,2),month=_useState2[0],setMonth=_useState2[1];var _useState3=useState(currDate.getFullYear()),_useState4=_slicedToArray(_useState3,2),year=_useState4[0],setYear=_useState4[1];var handlePrevClick=function handlePrevClick(e){setMonth(function(month){return month-1;});if(month===0){setYear(year-1);setMonth(11);}};var handleNextClick=function handleNextClick(e){setMonth(function(month){return month+1;});if(month===11){setYear(year+1);setMonth(0);}};// highlight when the date gets clicked\nvar activeDateRef=useRef(null);var activeMonthRef=useRef(null);// if localStorage has selected date\nvar storedDatObjString=localStorage.getItem(\"selectedDate\");var storedDateObj=storedDatObjString&&JSON.parse(storedDatObjString);if(storedDateObj){activeDateRef.current=storedDateObj.activeDate;activeMonthRef.current=storedDateObj.activeMonth;}var handleDateClick=function handleDateClick(date){activeMonthRef.current=month;activeDateRef.current=date;localStorage.setItem(\"selectedDate\",JSON.stringify({activeMonth:month,activeDate:date}));dispatch({type:\"change_date\",year:year,monthIndex:month,date:Number(date)});};return/*#__PURE__*/_jsxs(\"div\",{className:clsx(_defineProperty({},styles.noShow,!props.showCalendar),styles.calendar),ref:props.calendarRef,children:[/*#__PURE__*/_jsx(CalendarTitle,{monthIndex:month,year:year,prevClick:handlePrevClick,nextClick:handleNextClick}),/*#__PURE__*/_jsx(CalendarDays,{}),/*#__PURE__*/_jsx(CalendarDates,{monthIndex:month,year:year,onDateClick:handleDateClick,activeDate:activeDateRef.current,activeMonth:activeMonthRef.current})]});}","map":{"version":3,"names":["useState","useContext","useRef","DateContext","CalendarTitle","CalendarDays","CalendarDates","clsx","styles","jsx","_jsx","jsxs","_jsxs","Calendar","props","_useContext","dispatch","currDate","Date","_useState","getMonth","_useState2","_slicedToArray","month","setMonth","_useState3","getFullYear","_useState4","year","setYear","handlePrevClick","e","handleNextClick","activeDateRef","activeMonthRef","storedDatObjString","localStorage","getItem","storedDateObj","JSON","parse","current","activeDate","activeMonth","handleDateClick","date","setItem","stringify","type","monthIndex","Number","className","_defineProperty","noShow","showCalendar","calendar","ref","calendarRef","children","prevClick","nextClick","onDateClick"],"sources":["/Users/sutaoliang/live-score/frontend/src/components/main/leftSection/calendar/Calendar.tsx"],"sourcesContent":["import { useState, useContext, useRef } from \"react\";\nimport { DateContext } from \"context/DateContext\";\nimport CalendarTitle from \"./calendarComponents/CalendarTitle\";\nimport CalendarDays from \"./calendarComponents/CalendarDays\";\nimport CalendarDates from \"./calendarComponents/CalendarDates\";\nimport { onCalendarClick } from \"types/types\";\nimport clsx from \"clsx\";\nimport styles from \"./Calendar.module.scss\";\n\nexport default function Calendar(props: onCalendarClick) {\n  const { dispatch } = useContext(DateContext);\n  const currDate = new Date();\n  const [month, setMonth] = useState(currDate.getMonth());\n  const [year, setYear] = useState(currDate.getFullYear());\n  const handlePrevClick = (e: React.MouseEvent<HTMLImageElement>): void => {\n    setMonth((month) => month - 1);\n    if (month === 0) {\n      setYear(year - 1);\n      setMonth(11);\n    }\n  };\n  const handleNextClick = (e: React.MouseEvent<HTMLImageElement>): void => {\n    setMonth((month) => month + 1);\n    if (month === 11) {\n      setYear(year + 1);\n      setMonth(0);\n    }\n  };\n\n  // highlight when the date gets clicked\n  const activeDateRef = useRef<number | string | null | undefined>(null);\n  const activeMonthRef = useRef<number | string | null | undefined>(null);\n\n  // if localStorage has selected date\n  const storedDatObjString = localStorage.getItem(\"selectedDate\");\n  const storedDateObj = storedDatObjString && JSON.parse(storedDatObjString);\n  if (storedDateObj) {\n    activeDateRef.current = storedDateObj.activeDate;\n    activeMonthRef.current = storedDateObj.activeMonth;\n  }\n\n  const handleDateClick = (date: number | string) => {\n    activeMonthRef.current = month;\n    activeDateRef.current = date;\n    localStorage.setItem(\n      \"selectedDate\",\n      JSON.stringify({ activeMonth: month, activeDate: date })\n    );\n    dispatch({\n      type: \"change_date\",\n      year: year,\n      monthIndex: month,\n      date: Number(date),\n    });\n  };\n\n  return (\n    <div\n      className={clsx(\n        { [styles.noShow]: !props.showCalendar },\n        styles.calendar\n      )}\n      ref={props.calendarRef}\n    >\n      <CalendarTitle\n        monthIndex={month}\n        year={year}\n        prevClick={handlePrevClick}\n        nextClick={handleNextClick}\n      />\n      <CalendarDays />\n      <CalendarDates\n        monthIndex={month}\n        year={year}\n        onDateClick={handleDateClick}\n        activeDate={activeDateRef.current}\n        activeMonth={activeMonthRef.current}\n      />\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}